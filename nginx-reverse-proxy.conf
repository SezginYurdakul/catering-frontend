# Nginx configuration on your main server
# This file should be placed in /etc/nginx/sites-available/ or /etc/nginx/conf.d/
# directory on your server

server {
    listen 80;
    server_name sezginyurdakul.com;

    # For SSL (recommended)
    # listen 443 ssl http2;
    # ssl_certificate /path/to/cert.pem;
    # ssl_certificate_key /path/to/key.pem;

    # Frontend - /catering path
    location /catering/ {
        proxy_pass http://localhost:8082/catering/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }

    # Backend API - /catering_api path
    # NOTE: Backend is already running in catering_api_nginx container
    # This configuration is for reference only
    # If backend is not yet configured in nginx:
    location /catering_api/ {
        proxy_pass http://localhost:80/catering_api/;
        # or catering_api_nginx container is running on ports 80 and 443
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }

    # Other settings for main domain...
    location / {
        # Your existing site configuration
    }
}
